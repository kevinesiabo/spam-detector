name: CI

on:
	push:
		branches: [ "**" ]
	pull_request:
		branches: [ "**" ]

jobs:
	build-test:
		runs-on: windows-latest
		steps:
			- name: Checkout
			  uses: actions/checkout@v4

			- name: Setup Python
			  uses: actions/setup-python@v5
			  with:
				python-version: '3.13'

			- name: Install dependencies
			  run: |
				python -m pip install --upgrade pip
				pip install -r requirements.txt
				pip install pytest
			  working-directory: ./spam-detector

			- name: Train model
			  run: |
				python train.py
			  working-directory: ./spam-detector

			- name: Run tests
			  run: |
				pytest -q
			  working-directory: ./spam-detector


